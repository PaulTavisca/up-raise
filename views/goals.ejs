<% layout('layout') -%>
<% script('/javascripts/models/goal.js') -%>
<% script('/javascripts/router/goalsRoute.js') -%>
<% script('/javascripts/controllers/goalsController.js') -%>

<script type="text/x-handlebars" data-template-name="goals">
	{{outlet headerBar}}		
	<% if (user) { %>
		<div class="container">
			<h2> Goals for <strong><%= employee.firstName %></strong> <small>(<%= goals.status %>)</small></h2>
			<h4> Review Cycle (<%= goals.cycle.startDate %> - <%= goals.cycle.endDate %>)</h4>
			<hr />
			<div>			
				<table class="table table-striped table-responsive table-bordered table-responsive">
					<tr>
						<th class="text-center"> Index</th>
						<th class="text-center"> KRA</th>
						<th class="text-center"> Goal-Type</th>
						<th class="text-center"> Description</th>
						<th class="text-center"> Weightage</th>
						<th class="text-center"> Actions</th>
					</tr>			
					{{#each }}
						<tr>
							<td> {{index}} </td>
							<td> {{kra}} </td>
							<td> {{type}} </td>
							<td> {{description}} </td>
								
							<td class="text-center"> {{weight}} </td>
							<td>
								<a> Edit </a>
								<a> Delete </a>
							</td>
						</tr>
					{{/each}}
					{{#if showAddRow}}
						<tr>
							<td> {{nextIndex}} </td>
							<td> {{input type="text" classNames="form-control" id="new-kra" placeholder="Enter KRA" value=kra }} </td>
							<td> {{input type="text" classNames="form-control" id="new-type" placeholder="Enter goal type" value=type }} </td>
							<td> {{textarea classNames="form-control" id="new-description" placeholder="Enter Details" value=description }} </td>
							<td class="text-center"> {{input type="text" classNames="form-control" id="new-weight" placeholder="Eg: 10 %" value=weight }} </td>
							<td>
								<a {{action "saveRow"}}>Save</a>
							</td>
						</tr>
					{{/if}}
				</table>				
				
				<% if (view == 'self') { %>
					<button class="btn btn-primary btn-md" id="btnSubmitGoals" {{action 'showAddGoalRow'}}>Add Goal</button>
					<div class="text-right btn-toolbar">
						<button class="btn btn-warning btn-md" id="btnSaveDraft">Reset</button>
						<button class="btn btn-info btn-md" id="btnSaveDraft" >Save Draft</button>
						<% if (goals.status == 'pending') { %>
							<button class="btn btn-primary btn-md" id="btnSubmitGoals">Submit for Approval</button>
						<% } %>
					</div>
				<% } %>
			</div>
		</div>
	<% } %>
	{{render 'footer'}}
</script>
	

	